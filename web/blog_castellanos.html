<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ol{margin:0;padding:0}table td,table th{padding:0}.c0{orphans:2;widows:2;height:11pt}.c2{background-color:#ffffff;max-width:583.2pt;padding:14.4pt 14.4pt 14.4pt 14.4pt}.c4{font-size:18pt;font-weight:bold}.c1{orphans:2;widows:2}.c3{margin-left:108pt;text-indent:36pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c2"><p class="c1"><span class="c4">Programmer&rsquo;s Blog - Jonathan Castellanos-Gomez</span></p><p class="c0"><span></span></p><p class="c1"><span>Iteration 3 introduced the need to test the features that were developed for previous iterations. Specifically, each tool needed to be tested to verify that it correctly produced the expected output when it is applied to the canvas. I was primarily responsible for developing this testing feature for all of FlashPhoto&rsquo;s tools. Although the majority of this blog entry will be devoted to analyzing the specific code that emulates predefined user actions that are necessary to verify a tool&rsquo;s functionality, it is important to first understand the steps leading up to that point.</span></p><p class="c0"><span></span></p><p class="c1"><span>In order to validate a tool&rsquo;s performance, we needed to gather some baseline results on what the expected output should be for each tool. To accomplish this, we ran FlashPhoto and drew an image using each tool to serve as the expected output. Additionally, as we drew the baseline image using FlashPhoto, we logged each action that was applied to the canvas to serve as the input when simulating a tool&rsquo;s actions in our testing framework. More accurately, we wrote the tool&rsquo;s x and y coordinates, ColorData components, and whether the action was a drag or click to a file. Therefore, each line in the commands file took the form:</span></p><p class="c0"><span></span></p><p class="c1 c3"><span>actionType &nbsp;x &nbsp;y &nbsp;red &nbsp;green &nbsp;blue</span></p><p class="c0 c3"><span></span></p><p class="c1"><span>This command file is integral to the testing process, as it allows us to mimic exactly the actions that produced the baseline image. The testing framework that I developed, cppTestingSuiteDeluxe&trade;, takes as arguments the type of tool to be tested (string), the file containing the commands to emulate (.txt), and the baseline image to compare the results (.jpg). After rigorously validating the user input, the first step the program takes is to determine the type of tool to be tested and create a Tool object with the appropriate mask. The program then makes a call to the simulateCmds( ) method, which we will examine more closely.</span></p><p class="c0"><span></span></p><p class="c1"><span>The method begins by opening the file as an ifstream to allow for more convenient line-by-line reading. The while loop reads the file one line at a time, parsing the commands, and generating the appropriate actions. We begin by splitting the string which represents a line in the file into its constituent components and determining whether the action performed was a click or drag, represented by the characters &lsquo;c&rsquo; and &lsquo;d&rsquo;, respectively. The x and y coordinates are then saved. Next, the ColorData components are parsed. Note that this step does not occur for a Stamp and Blur tool, which do not depend on the user&rsquo;s selected color but rather on the ColorData values currently present on the canvas or some pre-defined values. The final call in the loop is to onMouseAction( ), which is the function that applies the tool to the canvas. Lastly, the image is saved into the same directory containing the baseline image. </span></p><p class="c0"><span></span></p><p class="c1"><span>The very final step in cppTestingSuiteDeluxe&trade; is to load both the simulated image and the baseline image and compare their PixelBuffers. If the images are the same, the program will print out the number 1, otherwise it will print out 0.</span></p><p class="c0"><span></span></p><p class="c1"><span>As always, the code follows the fundamental coding style guidelines that are found throughout our project. Namely, it utilizes appropriate indentation, generous spacing and meaningful variable names.</span></p><p class="c0"><span></span></p><p class="c0"><span></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 676.00px;"><img alt="" src="casteBlog.png" style="width: 624.00px; height: 676.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></body></html>
